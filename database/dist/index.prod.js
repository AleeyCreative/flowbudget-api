"use strict";function ownKeys(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),t.push.apply(t,n)),t}function _objectSpread(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(n,!0).forEach(function(e){_defineProperty(r,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})}return r}function _defineProperty(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function _createClass(e,r,n){return r&&_defineProperties(e.prototype,r),n&&_defineProperties(e,n),e}var logger=require("../logger/index"),userDB=require("./3rdParty/users.js"),budgetDB=require("./3rdParty/budgets.js"),DatabaseModel=function(){function e(){_classCallCheck(this,e),logger.log(" A new db instance has been initiated")}return _createClass(e,[{key:"registerUser",value:function(e){return new Promise(function(n,t){return userDB.insert(_objectSpread({},e),function(e,r){return e?t(e):n(r)})})}},{key:"updateUser",value:function(i,o){return new Promise(function(t,u){return userDB.find({_id:i},function(e,r){if(e)return u(e);var n=_objectSpread({},r,{},o);return userDB.update({_id:i},_objectSpread({},n),function(e,r){return e?u(e):t(r)})})})}},{key:"deleteUser",value:function(e){return new Promise(function(n,t){return userDB.remove({_id:e},{},function(e,r){return e?t(e):n(r)})})}},{key:"fetchUser",value:function(e){return new Promise(function(n,t){return userDB.find({_id:e},function(e,r){return e?t(e):n(r)})})}},{key:"fetchUserWithKey",value:function(e,r){return new Promise(function(n,t){return userDB.find(_defineProperty({},e,r),function(e,r){return e?t(e):n(r)})})}},{key:"createBudget",value:function(e){return new Promise(function(n,t){return budgetDB.insert(_objectSpread({},e),function(e,r){return e?t(e):n(newBudject)})})}},{key:"updateBudget",value:function(i,o){return new Promise(function(t,u){return budgetDB.find({_id:i},function(e,r){var n=_objectSpread({},r,{},o);return budgetDB.update({_id:i},_objectSpread({},n),function(e,r){return e?u(e):t(r)})})})}},{key:"deleteBudget",value:function(e){return new Promise(function(n,t){return budgetDB.remove({_id:e},{},function(e,r){return e?t(e):n(r)})})}},{key:"fetchBudget",value:function(e){return new Promise(function(n,t){return budgetDB.find(e,function(e,r){return e?t(e):n(r)})})}}]),e}(),db=new DatabaseModel;module.exports=db;